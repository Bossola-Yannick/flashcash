<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title> FlashCash </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/styleUp.css}">
</head>
<body class="vh-100 d-flex flex-column">
<div th:insert="~{fragments/header.html}"></div>
<main class="flex-grow-1">
    <h2 class="text-center my-3"> Hello : <span th:text="${user.name}"></span></h2>
    <h3 class="text-center my-3"> Your Contact Tag : <span th:text="${user.email}"></span></h3>
<!--    <p th:if="${account != null and account.iban != null}">-->
<!--        IBAN : <span th:text="${account.iban}"></span>-->
<!--    </p>-->
    <section class="container-fluid d-flex flex-row justify-content-center gx-5 my-5 ">
        <div class="card mx-5" style="width: 22rem;">
            <div class="card-body d-flex flex-column justify-content-between border-card rounded">
                <h5 class="card-title text-center">Gestion IBAN</h5>
                <p class="card-text text-center">Add your IBAN before make transfer.</p>
                <div class="d-flex justify-content-center">
                    <a class="btn btn-valid btl-lg"
                       href="/account/addiban"
                       th:text="${account.getIban() == null} ? 'Add IBAN' : 'Modify IBAN'">
                        <!-- fallback text -->
                        Add IBAN
                    </a>
                </div>
            </div>
        </div>
        <div class="card mx-5" style="width: 22rem;">
            <div class="card-body d-flex flex-column justify-content-between border-card rounded">
                <h5 class="card-title text-center">Add Contact</h5>
                <p class="card-text text-center">If you want transfer money speed, add this contact on your list.</p>
                <div class="d-flex justify-content-center">
                    <a class="btn btn-valid btl-lg" href="/link/addnew">Add Contact</a>
                </div>
            </div>
        </div>
        <div class="card mx-5" style="width: 22rem;" th:if="${account!=null}">
            <div class="card-body d-flex flex-column justify-content-between border-card rounded">
                <h5 class="card-title text-center">Transfer Money</h5>
                <p class="card-text text-center">Transfer money to a flashcash user.</p>
                <div class="d-flex justify-content-center" >
                    <a class="btn btn-valid btl-lg" href="/transfer/homeTransfer">Transfer</a>
                </div>
            </div>
        </div>
    </section>
    <section class=" container-fluid my-5">
        <h3 class="text-center my-4 fs-3">My Account Balance : <span class="fs-1" th:text="${#numbers.formatDecimal((account?.solde ?: 0), 1, 2)}"></span> â‚¬</h3>
        <h4 class="text-center my-4">My Account History Transfer</h4>
        <div class="container">
            <div class="table-responsive">
                <table class="table custom-table">
                    <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Type</th>
                        <th scope="col">Issuer</th>
                        <th scope="col">Receiving Account</th>
                        <th scope="col">Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="transfer : ${transfers}">
                        <td th:text="${transfer.date}"></td>
                        <td th:text="${transfer.type}"></td>
                        <td th:text="${transfer.issuer}"></td>
                        <td th:text="${transfer.recipient}"></td>
                        <td th:text="${#numbers.formatDecimal(transfer.value, 1, 2)}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="container-fluid my-5">
        <h3 class="text-center m-3">Link</h3>
        <div class="container">
            <div class="table-responsive">
                <table class="table custom-table">
                    <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="userLink : ${userLinks}">
                        <td th:text="${userLink.name}"></td>
                        <td th:text="${userLink.email}"></td>
                        <td>
                            <a th:href="@{/transfer/payment/{id}(id=${userLink.id})}">Transfer</a>
                            <a>Delete</a> <!--th:href="@{/link/delete/{id}(id=${link.link_id})}"-->
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</main>
<div class="text-bg-primary mt-3" th:insert="~{fragments/footer.html}"></div>
</body>
</html>